## **Урок 4: Масиви, Об’єкти, JSON і DOM**

### **1. Зміст уроку**

#### **A. Вступ до масивів**
- **Що таке масиви?**
  - Означення та призначення.
  - Впорядковані колекції елементів.
- **Створення масивів:**
  - За допомогою літералів масиву (`[]`).
  - За допомогою конструктора `Array`.
- **Доступ до елементів масиву:**
  - Індексація (починаючи з 0).
  - Негативна індексація (не підтримується нативно в JavaScript).
- **Поширені методи масивів:**
  - `push()`, `pop()`, `shift()`, `unshift()`.
  - `forEach()`, `map()`, `filter()`, `reduce()`.
- **Багатовимірні масиви:**
  - Створення та доступ до вкладених масивів.


##### Що таке масиви?

**Визначення:**
Масив — це впорядкована структура, схожа на список, яка використовується для зберігання кількох значень у змінній. Кожне значення в масиві називається елементом, доступ до якого здійснюється за його числовим індексом, починаючи з 0.

**Головні характеристики:**
- **Впорядкованість:** Елементи зберігають порядок, в якому їх було додано.
- **Доступ по індексу:** Перший елемент має індекс 0, другий — індекс 1 тощо.
- **Динамічний розмір:** Масиви в JavaScript можуть розширюватись або скорочуватись динамічно шляхом додавання чи видалення елементів.
- **Гетерогенні елементи:** Масиви можуть містити елементи різних типів даних (числа, рядки, об’єкти тощо).

**Використання в тестовій автоматизації:**
- Зберігання списків тестових даних чи наборів.
- Ітерація по масиву для запуску схожих тестів з різними даними.
- Організація результатів тестів чи повідомлень про помилки.


##### Створення масивів

**Базове створення масиву:**
```javascript
// За допомогою літералу масиву
const fruits = ["Apple", "Banana", "Cherry"];

// За допомогою конструктора Array (рідше використовується)
const numbers = new Array(1, 2, 3, 4);
```

**Кращі практики:**
- Віддавайте перевагу літералам масивів для простоти й читабельності.
- Використовуйте описові назви змінних, які відображають зміст даних.
  
```javascript
// Гарна практика
const userNames = ["alice", "bob", "charlie"];

// Уникайте невиразних назв
const arr = ["data1", "data2"]; // Не описово
```

#### **B. Вступ до об’єктів**
- **Що таке об’єкти?**
  - Означення та призначення.
  - Пара ключ-значення для зберігання даних.
- **Створення об’єктів:**
  - За допомогою літералів об’єкта (`{}`).
  - За допомогою конструктора `Object`.
- **Доступ до властивостей об’єкта:**
  - Точка.
  - Квадратні дужки.
- **Поширені методи об’єкта:**
  - `Object.keys()`, `Object.values()`, `Object.entries()`.
- **Вкладені об’єкти:**
  - Створення об’єктів всередині об’єктів.
  - Доступ до вкладених властивостей.


##### Що таке об’єкти?

**Визначення:**
Об’єкт у JavaScript — це набір пар ключ-значення. Ключами зазвичай є рядки (або Symbols), які виступають ідентифікаторами, а значення можуть бути будь-якого типу — навіть іншими об’єктами чи масивами.

**Головні характеристики:**
- **Ключ-значення:** Доступ до даних здійснюється за ключем, а не за числовим індексом.
- **Невпорядкованість властивостей:** Порядок, у якому властивості оголошено, не гарантується.
- **Тип посилання:** Об’єкти — це посилальні типи, тобто кілька змінних можуть посилатись на один об’єкт у пам’яті.
- **Гнучка структура:** Об’єкти можна розширювати чи змінювати під час виконання, додаючи чи видаляючи властивості.

**Використання в тестовій автоматизації:**
- Представлення складних структур тестових даних (наприклад, профілі користувачів, налаштування).
- Зберігання відповідей API й швидкий доступ до потрібних даних.
- Управління даними стану під час виконання тесту.


##### Створення об’єктів

**Базове створення об’єкта:**
```javascript
// За допомогою літералу об'єкта
const user = {
  name: "Alice",
  email: "alice@example.com",
  role: "admin",
};
```

**Кращі практики:**
- Використовуйте літерали об’єкта для простоти.
- Робіть назви властивостей описовими.
- Уникайте надмірно складних об’єктів; за потреби розбивайте їх.

```javascript
// Гарна практика
const product = {
  id: 101,
  name: "Wireless Mouse",
  price: 29.99,
  stock: 100,
};

// Погана практика: неясні імена властивостей і змішування несхожих даних
const data = {
  a: "Some value",
  b: 123,
  c: true,
  user: { name: "Bob" }
};
```

##### Вкладені об’єкти

**Визначення:**
Вкладений об’єкт — це об’єкт, який містить інший об’єкт як одну зі своїх властивостей. Це дозволяє створювати ієрархічні структури даних для відображення складніших зв’язків.

**Головні характеристики:**
- **Ієрархічні дані:** Властивості можуть бути об’єктами, що дозволяє створювати багато рівнів.
- **Доступ до глибоких властивостей:** Для доступу до вкладених властивостей потрібно кілька рівнів пошуку.
- **Зручно для структурованих даних:** Вкладені об’єкти зручно використовувати для моделювання реальних сутностей і їх атрибутів (наприклад, об’єкт користувача з адресою).

**Використання в тестовій автоматизації:**
- Зберігання багаторівневих конфігурацій (наприклад, налаштування середовища, облікові дані з кількома атрибутами).
- Організація складних відповідей API, де один ендпоінт повертає вкладені дані (наприклад, деталі користувача разом з адресою, платіжними методами та вподобаннями).


##### Вкладені об’єкти

**Приклад вкладеного об’єкта:**
```javascript
const userProfile = {
  name: "Alice",
  email: "alice@example.com",
  address: {
    street: "123 Main St",
    city: "Townsville",
    zip: "12345"
  }
};

// Доступ до вкладених властивостей:
console.log(userProfile.address.city); // "Townsville"
```

**Кращі практики:**
- Структуруйте об’єкти так, щоб вони відображали структуру реальних сутностей.
- Уникайте надмірно глибокої вкладеності для підтримуваності.
- Розбивайте складні дані на кілька об’єктів чи масивів, якщо це легше для розуміння.

##### Доступ до властивостей об’єкта

**Дот-нотація:**
```javascript
console.log(user.name); // "Alice"
```

**Нотація через квадратні дужки:**
```javascript
console.log(user["email"]); // "alice@example.com"
```

**Кращі практики:**
- Використовуйте нотацію через крапку, якщо властивість відома і є дійсним ідентифікатором.
- Використовуйте квадратні дужки, якщо ім’я властивості динамічне або містить спецсимволи.
  
```javascript
const propertyName = "role";
console.log(user[propertyName]); // "admin"
```


#### **C. Розуміння JSON (JavaScript Object Notation)**
- **Що таке JSON?**
  - Означення та призначення.
  - Легковаговий формат обміну даними.
- **Структура JSON:**
  - Об’єкти та масиви у JSON.
  - Типи даних, які підтримує JSON.
- **Конвертація між JSON і об’єктами JavaScript:**
  - `JSON.stringify()` — об’єкт JavaScript у рядок JSON.
  - `JSON.parse()` — рядок JSON у об’єкт JavaScript.
- **Використання в тестовій автоматизації:**
  - Зберігання й керування тестовими даними.
  - Мокування відповідей API.


##### Що таке JSON?

**Визначення:**
JSON (JavaScript Object Notation) — це легковаговий, незалежний від мови формат обміну даними. Для опису структур даних використовує підмножину синтаксису JavaScript, представляючи структури у вигляді тексту, що легко читається, пишеться та передається.

**Головні характеристики:**
- **Текстовий формат:** JSON зберігається у вигляді рядка, тому ним легко обмінюватись по мережі.
- **Пари ключ-значення та масиви:** JSON віддзеркалює структури об’єктів і масивів JavaScript.
- **Підтримувані типи:** Рядки, числа, булеві, null, об’єкти та масиви. Функції й undefined не підтримуються.
- **Мовна незалежність:** Незважаючи на походження з JavaScript, JSON підтримується багатьма мовами програмування.

**Використання JSON у тестовій автоматизації для даних і API:**
- **Фікстури:** Зберігання тестових даних у JSON-файлах для зручного обслуговування і оновлення сценаріїв.
- **Мокування відповідей API:** Подача заздалегідь визначених відповідей JSON для імітації бекенду.
- **Дані для тестів:** Парсинг JSON для динамічного підживлення кількох тестових кейсів, зменшуючи дублювання та зусилля.


##### Конвертація між JSON і об’єктами JavaScript

**Конвертація об’єкта JavaScript у рядок JSON (`JSON.stringify()`):**
```javascript
const userObj = { name: "Bob", email: "bob@example.com" };
const jsonString = JSON.stringify(userObj);
console.log(jsonString); // '{"name":"Bob","email":"bob@example.com"}'
```

**Конвертація рядка JSON в об’єкт JavaScript (`JSON.parse()`):**
```javascript
const parsedObj = JSON.parse(jsonString);
console.log(parsedObj.name); // "Bob"
```

**Кращі практики:**
- Валідуйте або очищуйте JSON перед парсингом (якщо він приходить ззовні).
- Обробляйте помилки за допомогою try/catch при парсингу невідомих даних.

```javascript
try {
  const safeObj = JSON.parse(incomingJson);
  // Використовуйте safeObj тут
} catch (error) {
  console.error("Invalid JSON data:", error);
}
```

#### **D. Кращі практики роботи з масивами, об’єктами, JSON і DOM**
- **Читабельність та підтримуваність коду:**
  - Використовуйте описові назви для масивів і об’єктів.
  - Тримайте структури JSON простими та послідовними.
- **Продуктивність:**
  - Уникайте зайвих маніпуляцій із DOM.
  - Оптимізуйте операції над масивами при роботі з великими наборами.
- **Валідація даних:**
  - Валідуйте JSON-дані перед парсингом.
  - Перевіряйте наявність властивостей об’єкта перед зверненням до них.

#### **F. Практичні приклади**
- **Робота з даними тестування за допомогою масивів і об’єктів:**
  - Створення й керування наборами тестових даних.
  - Ітерація по тестових даних за допомогою методів масиву.
- **Обробка JSON у тестах з Cypress:**
  - Мокування відповідей API з JSON.
  - Парсинг і використання JSON-даних у тестах.

---

### **2. Практична частина: вправи та пропозиції для веб-функціоналу**

#### **A. Вправа з масивами**
- **Завдання:**
  - Створіть масив об’єктів користувачів, кожен з яких має `name`, `email` та `role`.
  - Використайте методи масиву (`map()`, `filter()`, `reduce()`) для виконання таких задач:
    - Витягування всіх email-адрес.
    - Фільтрування користувачів за роллю (наприклад, "admin").
    - Підрахунок загальної кількості користувачів.
  - **Приклад:**
    ```javascript
    const users = [
      { name: "Alice", email: "alice@example.com", role: "admin" },
      { name: "Bob", email: "bob@example.com", role: "user" },
      { name: "Charlie", email: "charlie@example.com", role: "user" },
      { name: "Dave", email: "dave@example.com", role: "moderator" },
    ];

    const emails = users.map(user => user.email);
    const admins = users.filter(user => user.role === "admin");
    const totalUsers = users.reduce((count) => count + 1, 0);

    console.log(emails);
    console.log(admins);
    console.log(totalUsers);
    ```


#### **B. Вправа з об’єктами**
- **Завдання:**
  - Створіть об’єкт продукту з властивостями `id`, `name`, `price` і `stock`.
  - Напишіть функції для:
    - Оновлення кількості на складі.
    - Застосування знижки до ціни.
    - Отримання інформації про продукт.
  - **Приклад:**
    ```javascript
    const product = {
      id: 101,
      name: "Wireless Mouse",
      price: 25.99,
      stock: 100,
    };

    function updateStock(product, quantity) {
      product.stock += quantity;
      console.log(`Updated stock: ${product.stock}`);
    }

    function applyDiscount(product, percentage) {
      product.price -= product.price * (percentage / 100);
      console.log(`Discounted price: $${product.price.toFixed(2)}`);
    }

    function getProductInfo(product) {
      return `${product.name} (ID: ${product.id}) - $${product.price} | Stock: ${product.stock}`;
    }

    updateStock(product, -10);
    applyDiscount(product, 10);
    console.log(getProductInfo(product));
    ```

#### **C. Вправа з обробкою JSON у Cypress**
- **Завдання:**
  - Створіть JSON-файл (`users.json`), що містить масив об’єктів користувачів з властивостями `name`, `email` та `role`.
  - Напишіть тест Cypress, який:
    - Завантажує дані JSON за допомогою `cy.fixture()`.
    - Ітерує по даних користувачів для створення акаунтів або перевірки даних.
  - **Приклад:**
    ```json
    // users.json
    [
      { "name": "Alice", "email": "alice@example.com", "role": "admin" },
      { "name": "Bob", "email": "bob@example.com", "role": "user" },
      { "name": "Charlie", "email": "charlie@example.com", "role": "user" }
    ]
    ```

    ```javascript
    // Cypress Test
    describe('User Registration', () => {
      beforeEach(() => {
        cy.fixture('users').as('usersData');
      });

      it('Registers multiple users from JSON data', function () {
        this.usersData.forEach(user => {
          cy.visit('/register');
          cy.get('#username').type(user.name);
          cy.get('#email').type(user.email);
          cy.get('#role').select(user.role);
          cy.get('#submit').click();
          cy.contains('Registration Successful!').should('be.visible');
        });
      });
    });
    ```

- **Пропозиція для веб-функціоналу:**
  - Реалізуйте форму реєстрації, де:
    - Тестувальники можуть автоматично надсилати дані для реєстрації декількох користувачів з JSON-файлу.
    - Перевіряється, чи реєстрація кожного користувача успішна відповідно до введених у JSON даних.


---

### **3. Потенційні питання студентів**

#### **A. Масиви та об’єкти:**
1. **У чому різниця між масивом і об’єктом у JavaScript?**
   - **Відповідь:**  
     Масив — це впорядкована колекція елементів з доступом за числовими індексами, що підходить для зберігання списків. Об’єкт — це невпорядкована колекція пар ключ-значення, яка краще підходить для складних структур даних із названими атрибутами.

2. **Як ітеруватися по елементах масиву?**
   - **Відповідь:**  
     Можна використовувати цикли (`for`, `while`), методи масиву (`forEach()`, `map()`, `filter()`, `reduce()`) або новий синтаксис `for...of`.

3. **Які переваги використання об’єктів для зберігання даних у тестах?**
   - **Відповідь:**  
     Об’єкти дозволяють структуровано й описово відображати дані, що спрощує їх обробку і підвищує читабельність, особливо при роботі зі складними тестовими наборами.

#### **B. JSON:**
1. **Чому JSON віддають перевагу для обміну даними у веб-застосунках?**
   - **Відповідь:**  
     JSON легкий, його зручно читати й писати, він нативно підтримується JavaScript і сумісний із різними платформами і мовами, тому ідеально підходить для обміну даними між клієнтом і сервером.

2. **Чи можна включати функції у дані JSON?**
   - **Відповідь:**  
     Ні, JSON підтримує лише типи: рядки, числа, об’єкти, масиви, булеві та null. Функції не підтримуються і не можуть бути серіалізовані у JSON.

#### **C. Кращі практики:**
1. **Чому важливо уникати глибокої вкладеності у структурах керування?**
   - **Відповідь:**  
     Глибоке вкладення ускладнює читання, розуміння та підтримку коду, підвищує ймовірність помилок. Використання захисних перевірок (guard clauses) або розбиття на дрібні функції допомагає цього уникнути.

2. **Як принцип DRY застосовується при написанні функцій і структур керування?**
   - **Відповідь:**  
     Принцип DRY (Don’t Repeat Yourself) заохочує мінімізувати дублювання коду шляхом створення багаторазових функцій або використання циклів, що покращує підтримку коду й знижує кількість помилок.

---

### **4. Додаткові матеріали: рекомендації**

#### **A. Офіційна документація і гіди:**
- **JavaScript Масиви:**
  - [MDN Arrays](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)
- **JavaScript Об’єкти:**
  - [MDN Objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
- **JSON:**
  - [MDN JSON](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON)
  
#### **B. Туторіали й статті:**
- **Розуміння JavaScript масивів і об’єктів:**
  - [W3Schools JavaScript Arrays](https://www.w3schools.com/js/js_arrays.asp)
  - [W3Schools JavaScript Objects](https://www.w3schools.com/js/js_objects.asp)
- **Робота з JSON:**
  - [FreeCodeCamp JSON Guide](https://www.freecodecamp.org/news/javascript-json-tutorial-how-to-parse-json-with-examples/)
- **Маніпуляції з DOM:**
  - [JavaScript.info DOM Introduction](https://javascript.info/dom-nodes)

#### **C. Інтерактивні платформи для навчання:**
- **Codecademy:**
  - [Learn JavaScript Arrays](https://www.codecademy.com/learn/introduction-to-javascript/modules/arrays)
  - [Learn JavaScript Objects](https://www.codecademy.com/learn/introduction-to-javascript/modules/objects)
- **FreeCodeCamp:**
  - [JavaScript Data Structures: Arrays](https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/basic-data-structures/)
  - [JavaScript Data Structures: Objects](https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/basic-data-structures/)
- **JavaScript.info:**
  - [JavaScript Objects](https://javascript.info/object)
  - [JSON](https://javascript.info/json)

#### **D. Відеотуторіали:**
- **Traversy Media:**
  - [JavaScript Arrays Tutorial](https://www.youtube.com/watch?v=R8rmfD9Y5-c)
  - [JavaScript Objects Tutorial](https://www.youtube.com/watch?v=7yUnN5n2nUc)
- **The Net Ninja:**
  - [JavaScript JSON Tutorial](https://www.youtube.com/watch?v=iiADhChRriM)
- **Academind:**
  - [JavaScript Arrays and Objects](https://www.youtube.com/watch?v=R8rmfD9Y5-c)

#### **E. Платформи для практики:**
- **HackerRank:**
  - [JavaScript Arrays Challenges](https://www.hackerrank.com/domains/tutorials/10-days-of-javascript)
  - [JavaScript Objects Challenges](https://www.hackerrank.com/domains/tutorials/10-days-of-javascript)
- **LeetCode:**
  - [JavaScript Arrays Problems](https://leetcode.com/problemset/all/?language=JavaScript&topicSlugs=array)
  - [JavaScript Objects Problems](https://leetcode.com/problemset/all/?language=JavaScript&topicSlugs=hash-table)
- **Exercism:**
  - [JavaScript Track - Arrays](https://exercism.io/tracks/javascript/exercises?difficulty=all&topic=arrays)
  - [JavaScript Track - Objects](https://exercism.io/tracks/javascript/exercises?difficulty=all&topic=objects)

#### **F. Спільнота й підтримка:**
- **Stack Overflow:**
  - [JavaScript Arrays Questions](https://stackoverflow.com/questions/tagged/javascript+arrays)
  - [JavaScript Objects Questions](https://stackoverflow.com/questions/tagged/javascript+objects)
  - [JSON Questions](https://stackoverflow.com/questions/tagged/json)
- **Reddit:**
  - [r/javascript](https://www.reddit.com/r/javascript/)
  - [r/learnjavascript](https://www.reddit.com/r/learnjavascript/)
- **Дискорд спільноти:**
  - Приєднуйтесь до Discord-серверів, присвячених JavaScript для оперативної допомоги та обговорень.

---

### **5. Пропонований розподіл уроку на 3 години**

#### **Година 1: Масиви та об’єкти (60 хвилин)**
- **Вступ до масивів (25 хв):**
  - Означення, створення, доступ до елементів.
  - Поширені методи масивів з прикладами.
- **Практична вправа:**
  - Студенти створюють і маніпулюють масивами з використанням різних методів.
- **Вступ до об’єктів (25 хв):**
  - Означення, створення, доступ до властивостей.
  - Поширені методи об’єктів з прикладами.
- **Практична вправа:**
  - Студенти створюють об’єкти й виконують над ними операції.
- **Перерва (10 хв):**
  - Коротка пауза для відпочинку.

#### **Година 2: JSON і DOM (60 хвилин)**
- **Розуміння JSON (50 хв):**
  - Означення, структура, конвертація між JSON і об’єктами.
  - Приклади для тестової автоматизації.
- **Практична вправа:**
  - Студенти створюють JSON-файли, тренуються у парсингу та серіалізації JSON.
- **Перерва (10 хв):**
  - Коротка пауза для відпочинку.

#### **Година 3: Кращі практики та практичне застосування (60 хвилин)**
- **Кращі практики використання масивів, об’єктів, JSON і DOM (20 хв):**
  - Читабельність коду, продуктивність, валідація й питання безпеки.
  - Повторне використання та модульність.
- **Практична вправа:**
  - Студенти рефакторять наявний код з урахуванням кращих практик.
- **Практичні приклади (25 хв):**
  - Робота з тестовими даними через масиви й об’єкти.
  - Робота з JSON у тестах Cypress.
- **Інтерактивна демонстрація (10 хв):**
  - Покроковий розбір веб-сторінки візуалізації зони видимості змінних.
- **Q&A (5 хв):**
  - Відповіді на запитання студентів.
  - Уточнення та підсилення здобутих знань.

---

### **6. Додаткові рекомендації**

#### **A. Інтерактивні демонстрації:**
- **Живий кодинг:**
  - Показ створення та маніпулювання масивами й об’єктами у реальному часі.
  - Парсинг та серіалізація JSON-даних.
  - Маніпуляції з DOM та обробка подій наочно.
- **Дебаг з `console.log`:**
  - Використовуйте `console.log` для відстеження операцій з масивами, об’єктами.
  - Перевіряйте змінені JSON-дані та DOM у консолі браузера.

#### **B. Візуалізація матеріалу:**
- **Діаграми:**
  - Відобразіть структуру масиву та об’єкта.
  - Поясніть формат JSON та зв’язок із об’єктами JavaScript.
  - Покажіть структуру DOM-дерева для пояснення ієрархії.

- **Фрагменти коду:**
  - Наводьте чіткі й короткі приклади для демонстрації концепцій.
- **Блок-схеми:** 
  - Використовуйте для пояснення потоків даних у тестах із JSON або маніпуляцій із DOM.

#### **C. Заохочення участі:**
- **Парне програмування:**
  - Нехай студенти працюють парами для вирішення вправ з масивів і об’єктів — це сприяє співпраці.
- **Швидкі опитування та вікторини:**
  - Впроваджуйте інтерактивні вікторини для оцінки розуміння та підвищення залученості.
  - Використовуйте опитування, щоб дізнатись рівень впевненості учнів.

#### **D. Чіткі інструкції:**
- **Покрокові гіди:**
  - Детально опишіть інструкції до кожної практичної вправи для легкості виконання.
- **Поради для усунення проблем:**
  - Передбачайте типові проблеми (наприклад, помилки синтаксису у JSON, селекція DOM) й давайте рішення.

#### **E. Підтримка сприятливої атмосфери:**
- **Заохочуйте питання:**
  - Створіть відкрите середовище, в якому студентам зручно питати.
- **Даєте багато прикладів:**
  - Наводьте різні приклади для кожної теми, щоб навчання було різнобічне.
- **Peer review:**
  - Заохочуйте взаємну перевірку коду для спільного навчання й засвоєння кращих практик.

#### **F. Використання реальних сценаріїв:**
- **Менеджмент тестових даних:**
  - Показуйте, як керувати складними даними за допомогою масивів та об’єктів.
- **Мокування API через JSON:**
  - Демонструйте, як мокувати відповіді API у тестах Cypress з використанням JSON-даних.
