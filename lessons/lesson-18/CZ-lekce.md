## **Lekce 18: Cypress Dashboard, Reporting a Pr≈Øbƒõ≈æn√° integrace a dod√°v√°n√≠ (CI/CD)**

### **C√≠le**

- **Cypress Dashboard:**  
  Pochopit funkce a p≈ô√≠nosy Cypress Dashboardu pro spr√°vu a sledov√°n√≠ bƒõh≈Ø test≈Ø.

- **Reporting:**  
  Nauƒçit se generovat, p≈ôizp≈Øsobovat a interpretovat Cypress testovac√≠ reporty a metriky.

- **Integrace CI/CD:**  
  Integrovat Cypress testy do automatizovan√Ωch workflow pomoc√≠ popul√°rn√≠ch CI/CD n√°stroj≈Ø (nap≈ô√≠klad GitHub Actions, GitLab CI nebo Jenkins), aby se testy spou≈°tƒõly p≈ôi ka≈æd√©m commitu a nasazen√≠ k√≥du.

---

### **Podrobn√Ω obsah**

#### **A. Cypress Dashboard**

1. **P≈ôehled funkc√≠ Cypress Dashboardu:**  
Webov√° slu≈æba poskytovan√° Cypress.io pro spr√°vu a vizualizaci bƒõh≈Ø test≈Ø.  
K dispozici pro open-source i komerƒçn√≠ pou≈æit√≠.

Registrujte se zde: [https://dashboard.cypress.io](https://dashboard.cypress.io)

   - **Monitorov√°n√≠ v re√°ln√©m ƒçase:**  
     Sledujte stav bƒõhu test≈Ø, videa, screenshoty a logy v re√°ln√©m ƒçase.
   - **Historie test≈Ø & analytika:**  
     Analyzujte trendy v ƒçase, detailn√≠ historii bƒõh≈Ø a sledujte v√Ωkon.
   - **Ladƒõn√≠ chyb:**  
     P≈ô√≠stup k ƒçasov√Ωm sn√≠mk≈Øm a podrobn√Ωm log≈Øm pro rychl√© odhalen√≠ probl√©m≈Ø.
   - **Spolupr√°ce:**  
     Sd√≠len√≠ v√Ωsledk≈Ø test≈Ø s kolegy a integrace s n√°stroji pro sledov√°n√≠ √∫kol≈Ø.

2. **P≈ô√≠nosy pro spr√°vu a reporting test≈Ø:**  
   - **Centralizovan√Ω pohled:**  
     V≈°echny bƒõhy test≈Ø a jejich detaily jsou ulo≈æeny na jednom dashboardu.
   - **Automatick√Ω z√°znam vide√≠ a screenshot≈Ø:**  
     Jednodu≈°≈°√≠ ladƒõn√≠ obƒçasnƒõ se vyskytuj√≠c√≠ch probl√©m≈Ø.
   - **Vylep≈°en√Ω reporting:**  
     Vizualizace v√Ωkonu test≈Ø a trend≈Ø.
   - **T√Ωmov√° spolupr√°ce:**  
     Umo≈æ≈àuje sd√≠len√≠ poznatk≈Ø a historick√Ωch dat se zainteresovan√Ωmi stranami.

3. **Nastaven√≠ integrace Cypress Dashboardu:**  
   - **Vytvo≈ôen√≠ √∫ƒçtu:**  
     Registrujte se na [Cypress Dashboard](https://dashboard.cypress.io/).
   - **Konfigurace projektu:**  
     P≈ôidejte ID projektu do konfigurace Cypress.
     ```json
     // Uk√°zka v cypress.config.js:
     module.exports = defineConfig({
       e2e: {
         // ... dal≈°√≠ nastaven√≠
         projectId: 'your-project-id', // Poskytuje Cypress Dashboard
       }
     });
     ```
   - **Nahr√°n√≠ v√Ωsledk≈Ø:**  
     Pou≈æijte CLI p≈ô√≠kaz `npx cypress run --record --key <record-key>` pro nahr√°n√≠ v√Ωsledk≈Ø test≈Ø.

   - **P≈ôid√°n√≠ do testovac√≠ho p≈ô√≠kazu:**
      ```json
      "scripts": {
        "test:cloud": "cypress run --record --key YOUR_PROJECT_KEY"
      }
      ```

---

#### **B. Reporting**

1. **Generov√°n√≠ testovac√≠ch report≈Ø:**  
- Pom√°h√° odhalit vzorce v ne√∫spƒõ≈°√≠ch.
- Dokumentuje kvalitu a spolehlivost test≈Ø.
- U≈æiteƒçn√© v t√Ωmov√© komunikaci a CI dashboardech.
- Screenshoty a videa jsou automaticky ukl√°d√°ny p≈ôi chybƒõ (`videos/`, `screenshots/`).

   - **Vestavƒõn√Ω reporting:**  
     Cypress poskytuje z√°kladn√≠ reporting v CLI, vƒçetnƒõ detail≈Ø o √∫spƒõ≈°n√Ωch, ne√∫spƒõ≈°n√Ωch a p≈ôeskoƒçen√Ωch testech.
   - **Vlastn√≠ reportery:**  
     Pluginy jako `cypress-mochawesome-reporter` mohou generovat podrobn√© HTML reporty.
     ```bash
     npm install cypress-mochawesome-reporter --save-dev
     ```
     Pot√© nakonfigurujte v konfiguraci Cypress:
     ```javascript
     module.exports = defineConfig({
       e2e: {
         reporter: 'cypress-mochawesome-reporter',
         reporterOptions: {
           reportDir: 'cypress/reports',
           overwrite: false,
           html: true,
           json: true
         }
       }
     });
     ```
     Vygenerov√°n√≠ pln√©ho HTML reportu:
      ```bash
      npx mochawesome-merge cypress/reports/*.json | npx mochawesome-report-generator --reportDir cypress/reports/html
      ```

2. **P≈ôizp≈Øsoben√≠ v√Ωstupn√≠ch report≈Ø:**  
   - P≈ôizp≈Øsobte n√°zev reportu, t√©ma a v√Ωstupn√≠ slo≈æky pomoc√≠ voleb v reporteru.
   - Analyzujte metriky jako d√©lka testu, poƒçet opakov√°n√≠ a chybov√© logy pro nov√© poznatky.

3. **Anal√Ωza v√Ωsledk≈Ø test≈Ø a metrik:**  
   - Prohl√≠≈æejte screenshoty a z√°znamy z Dashboardu.
   - Vyu≈æijte podrobn√© logy a sn√≠mky k nalezen√≠ selh√°n√≠ a √∫zk√Ωch m√≠st ve v√Ωkonu test≈Ø.

---

#### **C. Pr≈Øbƒõ≈æn√° integrace (CI) a pr≈Øbƒõ≈æn√© dod√°v√°n√≠ (CD)**

- **CI (Continuous Integration):** Automaticky testuje a validuje zmƒõny v k√≥du.
- **CD (Continuous Delivery/Deployment):** Automaticky nasazuje k√≥d do testovac√≠ch nebo produkƒçn√≠ch prost≈ôed√≠.

###### üîπ Popul√°rn√≠ CI n√°stroje:
- GitHub Actions ‚úÖ
- GitLab CI
- Jenkins
- CircleCI
- Bitbucket Pipelines
- Azure DevOps

1. **√övod do koncept≈Ø CI/CD:**  
   - **CI (Continuous Integration):**  
     Automatizace procesu buildu a testov√°n√≠ k√≥du p≈ôi ka≈æd√©m commitu.
   - **CD (Continuous Delivery):**  
     Automatizace nasazov√°n√≠, aby se zmƒõny k√≥du dostaly do produkce rychle a spolehlivƒõ.

2. **Konfigurace spou≈°tƒõn√≠ Cypress test≈Ø v CI/CD pipelinech:**  
   - **P≈ô√≠klad pro GitHub Actions:**
     ```yaml
     # .github/workflows/cypress.yml
     name: Cypress Tests

     on:
       push:
         branches:
           - main
       pull_request:
         branches:
           - main

     jobs:
       cypress-run:
         runs-on: ubuntu-latest
         steps:
           - uses: actions/checkout@v2
           - name: Use Node.js
             uses: actions/setup-node@v2
             with:
               node-version: '16'
           - name: Install Dependencies
             run: npm install
           - name: Run Cypress Tests
             run: npx cypress run --record --key ${{ secrets.CYPRESS_RECORD_KEY }}
     ```
   - **Automatizace bƒõh≈Ø test≈Ø:**  
     Nastavte CI/CD pipeline tak, aby testy bƒõ≈æely automaticky p≈ôi commitech, pull requestech nebo nasazen√≠ch.

4. **Notifikace a upozornƒõn√≠:**  
   - Integrace se Slackem, e-mailem nebo jin√Ωmi zpr√°vov√Ωmi syst√©my pro upozornƒõn√≠ t√Ωmu na selh√°n√≠ test≈Ø.
   - Vyu≈æ√≠vejte notifikace Dashboardu k informov√°n√≠ zainteresovan√Ωch o probl√©mech s buildem.

5. **Osvƒõdƒçen√© postupy v CI/CD:**  
   - Bezpeƒçn√© spravov√°n√≠ environment promƒõnn√Ωch a tajn√Ωch √∫daj≈Ø (pou≈æ√≠vejte ≈°ifrovan√© √∫lo≈æi≈°tƒõ CI/CD platforem).
   - Zaji≈°tƒõte konzistentn√≠ prost≈ôed√≠ pro testov√°n√≠ (nap≈ô√≠klad pomoc√≠ Dockeru nebo kontejnerizace).
   - Optimalizujte bƒõh test≈Ø paralelizac√≠ a vyu≈æ√≠v√°n√≠m cachov√°n√≠.

---

#### **D. Praktick√© aktivity**

1. **Nastaven√≠ Cypress Dashboardu:**  
   - Vytvo≈ôte √∫ƒçet na Cypress Dashboardu a nakonfigurujte projekt s p≈ôidƒõlen√Ωm ID projektu.
   - Spou≈°tƒõjte testy s volbou record, aby se v√Ωsledky nahr√°valy do Dashboardu.

2. **Konfigurace CI pipeline:**  
   - Pou≈æijte GitHub Actions (nebo jin√Ω CI n√°stroj) k nastaven√≠ workflow, kter√© bude spou≈°tƒõt Cypress testy automaticky po pushi a pull requestech.
   - Procviƒçte si spu≈°tƒõn√≠ pipeline a prohl√©dnƒõte si vygenerovan√© reporty test≈Ø.

3. **Generov√°n√≠ a interpretace testovac√≠ch report≈Ø:**  
   - Nakonfigurujte vlastn√≠ reporter (nap≈ô√≠klad `cypress-mochawesome-reporter`) a generujte HTML reporty.
   - Analyzujte reporty pro odhalen√≠ nestabiln√≠ch test≈Ø, probl√©m≈Ø s v√Ωkonem a trend≈Ø v chyb√°ch.

4. **Simulace sc√©n√°≈ôe z praxe:**  
   - Pou≈æijte `cy.intercept()` k podvr≈æen√≠ s√≠≈•ov√Ωch po≈æadavk≈Ø a simulaci r≈Øzn√Ωch odpovƒõd√≠ backendu.
   - Kombinujte UI testy s API testy t√≠m, ≈æe ovƒõ≈ô√≠te, ≈æe UI zobrazuje data odpov√≠daj√≠c√≠ API odpovƒõd√≠m.

5. **CI/CD upozornƒõn√≠:**  
   - Nastavte upozornƒõn√≠ (nap≈ô√≠klad p≈ôes Slack) v CI pipeline, kter√° v√°s informuj√≠ o selh√°n√≠ test≈Ø.
   - Diskutujte, jak automatizovan√° upozornƒõn√≠ zlep≈°uj√≠ reakci t√Ωmu na probl√©my.

---

#### **E. Zdroje**

- **Dokumentace Cypress Dashboardu:**  
  [Cypress Dashboard](https://docs.cypress.io/guides/dashboard)
- **Pluginy pro reporting v Cypressu:**  
  - [cypress-mochawesome-reporter](https://github.com/adamgruber/cypress-mochawesome-reporter)
- **Pr≈Øvodci integrac√≠ CI/CD:**  
  - GitHub Actions: [GitHub Actions for Cypress](https://docs.cypress.io/guides/guides/continuous-integration)
  - GitLab CI: [Cypress with GitLab CI](https://docs.cypress.io/guides/guides/gitlab-ci)
  - Jenkins: [Using Cypress with Jenkins](https://docs.cypress.io/guides/guides/jenkins)
- **Komunitn√≠ p≈ô√≠klady:**  
  Vyhledejte na GitHubu repozit√°≈ôe pou≈æ√≠vaj√≠c√≠ Cypress s CI/CD pipeline pro dal≈°√≠ p≈ô√≠klady a inspiraci.

---

### **Potenci√°ln√≠ ot√°zky student≈Ø a odpovƒõdi**

1. **Q:** *Jak√Ω je hlavn√≠ p≈ô√≠nos pou≈æ√≠v√°n√≠ Cypress Dashboardu?*  
   **A:** Cypress Dashboard centralizuje v√Ωsledky bƒõh≈Ø test≈Ø, poskytuje zpƒõtnou vazbu v re√°ln√©m ƒçase pomoc√≠ vide√≠ a screenshot≈Ø a pom√°h√° p≈ôi ladƒõn√≠ chyb d√≠ky podrobn√Ωm log≈Øm a historick√Ωm dat≈Øm.

2. **Q:** *Jak m≈Ø≈æu v Cypressu p≈ôizp≈Øsobit testovac√≠ reporty?*  
   **A:** M≈Ø≈æete pou≈æ√≠t vlastn√≠ reportery jako `cypress-mochawesome-reporter` pro generov√°n√≠ podrobn√Ωch HTML report≈Ø. Tito report√©≈ôi jsou nakonfigurovateln√≠ pomoc√≠ voleb v konfiguraƒçn√≠m souboru Cypress pro √∫pravu form√°tu reportu a um√≠stƒõn√≠ v√Ωstupu.

3. **Q:** *Co je CI/CD a proƒç je d≈Øle≈æit√Ω pro testovac√≠ automatizaci?*  
   **A:** CI/CD znamen√° pr≈Øbƒõ≈ænou integraci a pr≈Øbƒõ≈æn√© dod√°v√°n√≠. Automatizuje proces buildov√°n√≠, testov√°n√≠ a nasazov√°n√≠, co≈æ zaji≈°≈•uje, ≈æe zmƒõny v k√≥du jsou automaticky ovƒõ≈ôeny a rychle vyd√°van√©. Integrace Cypress test≈Ø do CI/CD pipeline pom√°h√° odhalit chyby vƒças a zaji≈°≈•uje kvalitu ka≈æd√©ho vyd√°n√≠.

4. **Q:** *Jak funguj√≠ environment promƒõnn√© a tajn√© √∫daje v CI/CD pipelinech?*  
   **A:** CI/CD platformy poskytuj√≠ zabezpeƒçen√© zp≈Øsoby spr√°vy environment promƒõnn√Ωch a tajn√Ωch √∫daj≈Ø. Tyto hodnoty jsou vst≈ôikov√°ny do procesu buildu a testov√°n√≠, tak≈æe citliv√° data (nap≈ô√≠klad API kl√≠ƒçe) nejsou zaps√°na v testech natvrdo.

5. **Q:** *Jak cy.intercept() zlep≈°uje spolehlivost test≈Ø?*  
   **A:** `cy.intercept()` umo≈æ≈àuje podvrhnout s√≠≈•ov√© po≈æadavky, tak≈æe va≈°e testy nejsou ovlivnƒõny variabilitou extern√≠ho backendu. To vede k deterministiƒçtƒõj≈°√≠m v√Ωsledk≈Øm a rychlej≈°√≠mu prov√°dƒõn√≠ test≈Ø.

6. **Q:** *Jak√© jsou v√Ωhody integrace Cypress test≈Ø do CI/CD pipeline?*  
   **A:** Automatizace bƒõh≈Ø test≈Ø p≈ôi ka≈æd√©m commitu nebo nasazen√≠, rychl√° zpƒõtn√° vazba na zmƒõny, zlep≈°en√° spolupr√°ce a schopnost odhalit chyby v ran√© f√°zi jsou hlavn√≠mi v√Ωhodami. Umo≈æ≈àuje tak√© pr≈Øbƒõ≈æn√© zaji≈°≈•ov√°n√≠ kvality nap≈ô√≠ƒç v√Ωvojov√Ωm cyklem.
